# 4. Python Requests套件

###### tags: `2022資工營`

## pip下載requests套件

pip是Python的套件管理工具，我們可以使用他來下載各式各樣的Python套件並幫忙管理，而requests就是其中一個套件，專門用來發送request和接收response。

在安裝前，我們先來看看原本電腦裡已經有哪些套件?

1. 首先在桌面建立一個資料夾(名稱任意)，建好後開啟VSCode，把剛剛建好的資料夾拉進VSCode裡面。
2. 點選上方導航欄的"Terminal"，再點"New Terminal"，下方如果出現小黑窗就成功了。
3. 在小黑窗中輸入`pip list`，應該會出現類似下面這樣的畫面。

![](https://i.imgur.com/ot3jwad.png)

看的出來現在還沒有requests套件，所以要用這個指令安裝：`pip install requests`

完成後長這樣：

![](https://i.imgur.com/8oXKU9l.png)


## 引用requests套件

點VSCode左側的"New File"，新增一個`demo01.py`的檔案。

在檔案第一行加上`import requests`，就可以開始在你的程式中使用requests套件了~ (請隊輔檢查)


## 下載VSCode外掛

VSCode是一個相當好用且輕量的程式碼編輯器，具有程式碼高光提示和自動補全的功能，加上VSCode完全開放原始碼，因此有非常多的外掛工具可以安裝，成為最受工程師歡迎的編輯器。

我們要下載一個"Python"套件，幫助我們自動補全程式碼。

1. 打開左側欄最下方的"Extensions"
2. 搜尋"Python"
3. 找到這個套件後按"install"
![](https://i.imgur.com/cHOxVSr.png)
4. 等待下載完成


## 第一個request

我自己寫的一個[中興大資工系網站](https://andychiangsh.github.io/python-spider-tutorial/web/)，大家先試著對這個網站送出第一個requests。

```python
import requests

url = "https://andychiangsh.github.io/python-spider-tutorial/web/"    # 中興大資工系網站網址

response = requests.get(url)    # 發送請求
print(response.text)    # 回應內容
```

回傳的是一個response物件，物件中的text就是網頁的HTML原始碼(部分截圖)。

![](https://i.imgur.com/rz16psS.png)


## status code

另外把也把response物件中的status code印出來：

```python
print(response.status_code)
```

```
200
```

status code表示HTTP的回應狀態，幾種常見的[狀態碼](https://developer.mozilla.org/zh-TW/docs/Web/HTTP/Status)：

* 200：一切順利，結果已經回傳。
* 301：伺服器將使用者重新定向（re-direct）到另一個位址，當網站更換網域名稱或更改 Routes 時可能會發生。
* 400：錯誤的語法請求。
* 403：伺服器已經理解請求，但是拒絕執行它，意即與請求一併發送的憑證無效。
* 404：找不到目標。

建議在爬蟲時都把status code印出來看一下，在出錯時比較容易Debug。
